{"version":3,"file":"js/212.1abc1856.js","mappings":"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","sources":["webpack://book/./src/views/RegisterView.vue","webpack://book/./src/views/RegisterView.vue?1ec6"],"sourcesContent":["<template>\n<div  class=\"login-container\"  >\n    <el-form ref=\"form\" :model=\"form\"    :rules=\"rules\" class=\"login-page\">\n      <h2 class=\"title\" style=\"margin-bottom: 20px\">用户注册</h2>\n      <el-form-item prop=\"username\" >\n        <el-input v-model=\"form.username\" placeholder=\"请输入用户名\" clearable >\n          <template #prefix>\n            <el-icon class=\"el-input__icon\"><User/></el-icon>\n          </template>\n        </el-input>\n      </el-form-item>\n      <el-form-item prop=\"password\">\n        <el-input v-model=\"form.password\"  placeholder=\"请输入密码\" clearable show-password>\n          <template #prefix>\n            <el-icon class=\"el-input__icon\"><Lock /></el-icon>\n          </template>\n        </el-input>\n      </el-form-item>\n\n      <el-form-item prop=\"confirm\">\n        <el-input v-model=\"form.confirm\" placeholder=\"请再次确认密码\" clearable show-password>\n          <template #prefix>\n            <el-icon class=\"el-input__icon\"><Lock /></el-icon>\n          </template>\n        </el-input>\n      </el-form-item>\n\n      <el-form-item prop=\"phone\">\n        <el-input v-model=\"form.phone\" placeholder=\"请输入手机号\" clearable>\n          <template #prefix>\n            <el-icon class=\"el-input__icon\"><Phone /></el-icon>\n          </template>\n        </el-input>\n      </el-form-item>\n\n\n\n      <el-form-item >\n        <el-button type=\"primary\" style=\" width: 100%\" @click=\"register\">注 册</el-button>\n      </el-form-item>\n      <el-form-item><el-button type=\"text\" @click=\"$router.push('/login')\">前往登录>> </el-button></el-form-item>\n    </el-form>\n</div>\n\n</template>\n\n<script>\nimport request from \"../utils/request\";\nimport {ElMessage} from \"element-plus\";\n\n// 本地模拟用户列表已移除，注册时直接调用后端接口\n// const mockRegisterUsers = []\n\nexport default {\n  name: \"RegisterView\",\n  components:{},\n  data(){\n    return{\n      form:{\n        role: '2',  // 注册页面默认并且只能注册普通用户\n        phone: ''\n      },\n      // 关闭本地模拟注册，直接调用后端 /register 写入数据库\n      useMock: false,\n      rules: {\n        username: [\n          {\n            required: true,\n            message: '请输入用户名',\n            trigger: 'blur',\n          },\n          {\n            min: 2,\n            max: 13,\n            message: '长度要求为2到13位',\n            trigger: 'blur',\n          },\n        ],\n        password: [\n          {\n            required: true,\n            message: '请输入密码',\n            trigger: 'blur',\n          }\n        ],\n        phone: [\n          {\n            required: true,\n            message: '请输入手机号',\n            trigger: 'blur',\n          }\n        ],\n        confirm:[\n          {\n            required:true,\n            message:\"请确认密码\",\n            trigger:\"blur\"\n          }\n        ],\n      }\n    }\n    },\n\n  methods:{\n    register(){\n      this.$refs['form'].validate((valid) => {\n        if (valid) {\n          if(this.form.password != this.form.confirm)\n          {\n            ElMessage.error(\"两次密码输入不一致\")\n            return\n          }\n          // 本地模拟注册，不访问后端\n          // if (this.useMock) {\n          //   const exist = mockRegisterUsers.find(u => u.username === this.form.username)\n          //   if (exist) {\n          //     ElMessage.error(\"用户名已存在（本地模拟）\")\n          //     return\n          //   }\n          //   const maxId = mockRegisterUsers.reduce((max, item) => Math.max(max, item.id), 0)\n          //   const newUser = {\n          //     id: maxId + 1,\n          //     username: this.form.username,\n          //     password: this.form.password,\n          //     nickName: this.form.username,\n          //     role: 2   // 注册页面只能生成普通用户\n          //   }\n          //   mockRegisterUsers.push(newUser)\n          //   ElMessage.success(\"注册成功（本地模拟）\")\n          //   this.$router.push(\"/login\")\n          //   return\n          // }\n\n          // 真实后端请求：字段名与后端 UserController 对齐\n          request.post(\"/register\",{\n            username: this.form.username,\n            password: this.form.password,\n            checkpassword: this.form.confirm,\n            phone: this.form.phone,\n            userRole: 0  // 注册用户为普通用户，后端只接受 0(普通用户) 或 1(管理员)\n          }).then(res=>{\n            if(res.code === 1 || res.code === 0)\n            {\n              ElMessage.success(res.msg || \"注册成功\")\n              this.$router.push(\"/login\")\n            }\n            else {ElMessage.error(res.msg || \"注册失败\")}\n          })\n        }\n      })\n\n    }\n  }\n\n  }\n\n</script>\n\n<style scoped>\n.login-container {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  background: url('../img/bg2.svg');\n  background-size: contain;\n}\n.login-page {\n  border-radius: 5px;\n  margin: 180px auto;\n  width: 350px;\n  padding: 35px 35px 15px;\n  background: #fff;\n  border: 1px solid #eaeaea;\n  box-shadow: 0 0 25px #cac6c6;\n}\n</style>","import { render } from \"./RegisterView.vue?vue&type=template&id=570390e4&scoped=true\"\nimport script from \"./RegisterView.vue?vue&type=script&lang=js\"\nexport * from \"./RegisterView.vue?vue&type=script&lang=js\"\n\nimport \"./RegisterView.vue?vue&type=style&index=0&id=570390e4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-570390e4\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_form","ref","model","$data","form","rules","_createElementVNode","style","_component_el_form_item","prop","_component_el_input","username","$event","placeholder","clearable","prefix","_withCtx","_component_el_icon","_component_User","password","_component_Lock","confirm","phone","_component_Phone","_component_el_button","type","onClick","$options","register","_cache","_ctx","$router","push","name","components","data","role","useMock","required","message","trigger","min","max","methods","this","$refs","validate","valid","ElMessage","error","request","post","checkpassword","userRole","then","res","code","success","msg","__exports__","render"],"ignoreList":[],"sourceRoot":""}