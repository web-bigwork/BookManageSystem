{"version":3,"file":"js/671.78ae224c.js","mappings":"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","sources":["webpack://book/./src/views/UserView.vue","webpack://book/./src/views/UserView.vue?d745"],"sourcesContent":["<template>\n  <div class=\"home\" style =\"padding: 10px\">\n<!-- 按钮-->\n<!-- 搜索-->\n    <div style=\"margin: 10px 0;\">\n      <el-form inline=\"true\" size=\"small\">\n        <el-form-item label=\"用户编号\" >\n      <el-input v-model=\"search1\" placeholder=\"请输入用户编号\"  clearable>\n        <template #prefix><el-icon class=\"el-input__icon\"><search/></el-icon></template>\n      </el-input>\n          </el-form-item >\n        <el-form-item label=\"用户名\" >\n          <el-input v-model=\"search2\" placeholder=\"请输入用户名\"  clearable>\n            <template #prefix><el-icon class=\"el-input__icon\"><search /></el-icon></template>\n          </el-input>\n        </el-form-item >\n        <el-form-item label=\"电话号码\" >\n          <el-input v-model=\"search3\" placeholder=\"请输入电话号码\"  clearable>\n            <template #prefix><el-icon class=\"el-input__icon\"><search /></el-icon></template>\n          </el-input>\n        </el-form-item >\n        <el-form-item>\n      <el-button type=\"primary\" style=\"margin-left: 1%\" @click=\"load\" size=\"mini\">查询</el-button>\n        </el-form-item>\n        <el-form-item>\n          <el-button size=\"mini\"  type=\"danger\" @click=\"clear\">重置</el-button>\n        </el-form-item>\n        <el-form-item style=\"float: right\" v-if=\"user.userRole == 1\">\n          <el-button type=\"primary\" size=\"mini\" @click=\"add\">添加用户</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <!-- 按钮-->\n    <div style=\"margin: 10px 0;\" >\n      <el-button type=\"primary\" size=\"mini\" @click=\"add\" v-if=\"(user.userRole == 1 || user.role == 1)\" style=\"margin-right: 10px\">\n        添加用户\n      </el-button>\n      <el-popconfirm title=\"确认删除?\" @confirm=\"deleteBatch\" v-if=\"user.userRole == 1\">\n        <template #reference>\n          <el-button type=\"danger\" size=\"mini\" >批量删除</el-button>\n        </template>\n      </el-popconfirm>\n    </div>\n<!-- 数据字段-->\n    <el-table :data=\"tableData\" stripe border=\"true\"  @selection-change=\"handleSelectionChange\" >\n      <el-table-column v-if=\"(user.userRole ==1 || user.role == 1)\"\n                       type=\"selection\"\n                       width=\"55\">\n      </el-table-column>\n      <el-table-column prop=\"id\" label=\"用户编号\" sortable />\n      <el-table-column prop=\"userName\" label=\"用户名\" />\n      <el-table-column prop=\"phone\" label=\"电话号码\" />\n      <el-table-column label=\"角色\">\n        <template v-slot=\"scope\">\n          <el-tag type=\"success\" v-if=\"scope.row.userRole == 1\">管理员</el-tag>\n          <el-tag type=\"info\" v-else>用户</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column fixed=\"right\" label=\"操作\" >\n        <template v-slot=\"scope\">\n          <el-button  size=\"mini\" @click =\"handleEdit(scope.row)\">编辑</el-button>\n          <el-popconfirm title=\"确认删除?\" @confirm=\"handleDelete(scope.row.id)\">\n            <template #reference>\n              <el-button type=\"danger\" size=\"mini\" >删除</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n<!--    分页-->\n    <div style=\"margin: 10px 0\">\n      <el-pagination\n          v-model:currentPage=\"currentPage\"\n          :page-size=\"pageSize\"\n          layout=\"total, prev, pager, next, jumper\"\n          :total=\"total\"\n          @current-change=\"handleCurrentChange\"\n      >\n      </el-pagination>\n\n      <el-dialog v-model=\"dialogVisible\" title=\"编辑用户信息\" width=\"30%\">\n        <el-form :model=\"form\" label-width=\"120px\">\n          <el-form-item label=\"用户名\">\n            <el-input style=\"width: 80%\" v-model=\"form.userName\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"密码\">\n            <el-input style=\"width: 80%\" v-model=\"form.password\" show-password></el-input>\n          </el-form-item>\n          <el-form-item label=\"确认密码\">\n            <el-input style=\"width: 80%\" v-model=\"form.checkpassword\" show-password></el-input>\n          </el-form-item>\n          <el-form-item label=\"电话号码\">\n            <el-input style=\"width: 80%\" v-model=\"form.phone\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"角色\">\n            <div>\n              <el-radio v-model.number=\"form.userRole\" :label=\"1\">管理员</el-radio>\n              <el-radio v-model.number=\"form.userRole\" :label=\"0\">用户</el-radio>\n            </div>\n          </el-form-item>\n        </el-form>\n        <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n      </span>\n        </template>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport request from \"../utils/request\";\nimport {ElMessage} from \"element-plus\";\n\nexport default {\n  created(){\n    this.load()\n    let userStr = sessionStorage.getItem(\"user\") || \"{}\"\n    this.user = JSON.parse(userStr)\n  },\n  name: 'UserView',\n  methods: {\n    handleSelectionChange(val){\n      this.ids = val.map(v => v.id)\n    },\n    deleteBatch(){\n      if (!this.ids.length) {\n        ElMessage.warning(\"请选择数据！\")\n        return\n      }\n      // 本地模拟删除\n      // if (this.useMock) {\n      //   this.ids.forEach(id => {\n      //     const index = mockUsers.findIndex(u => u.id === id)\n      //     if (index !== -1) {\n      //       mockUsers.splice(index, 1)\n      //     }\n      //   })\n      //   ElMessage.success(\"批量删除成功（本地模拟）\")\n      //   this.load()\n      //   return\n      // }\n      // 真实后端请求（接好后端再打开）\n      request.post(\"/user/deleteBatch\", this.ids).then(res => {\n        if (res.code === '0') {\n          ElMessage.success(\"批量删除成功\")\n          this.load()\n        } else {\n          ElMessage.error(res.msg)\n        }\n      })\n    },\n    load(){\n      // 优先执行单项精确查询：按 id / username / phone\n      if (this.search1) {\n        // search by id -> GET /user/{id}\n        const id = Number(this.search1)\n        if (!Number.isNaN(id)) {\n        const urlById = `/user/${id}`\n        console.log('Requesting by id:', urlById)\n        request.get(urlById).then(res => {\n            if (res.code === 1) {\n              this.tableData = [res.data]\n              this.total = 1\n            } else {\n              this.tableData = []\n              this.total = 0\n              ElMessage.warning(res.msg || '未找到用户')\n            }\n          }).catch(err => {\n            console.error('Error fetching by id', err, err?.response)\n            const status = err?.response?.status\n            ElMessage.error(`查询用户失败${status ? '（HTTP ' + status + ')' : ''}`)\n          })\n          return\n        }\n      }\n\n      if (this.search2) {\n        // search by username -> GET /user/by-username?username=\n        const urlByName = '/user/by-username'\n        console.log('Requesting by username:', urlByName, this.search2)\n        request.get(urlByName, { params: { username: this.search2 } }).then(res => {\n          if (res.code === 1 && res.data) {\n            this.tableData = [res.data]\n            this.total = 1\n          } else {\n            this.tableData = []\n            this.total = 0\n            ElMessage.warning(res.msg || '未找到用户')\n          }\n        }).catch(err => {\n          console.error('Error fetching by username', err, err?.response)\n          const status = err?.response?.status\n          ElMessage.error(`查询用户失败${status ? '（HTTP ' + status + ')' : ''}`)\n        })\n        return\n      }\n\n      if (this.search3) {\n        // search by phone -> GET /user/by-phone?phone=\n        const urlByPhone = '/user/by-phone'\n        console.log('Requesting by phone:', urlByPhone, this.search3)\n        request.get(urlByPhone, { params: { phone: this.search3 } }).then(res => {\n          if (res.code === 1 && res.data) {\n            this.tableData = [res.data]\n            this.total = 1\n          } else {\n            this.tableData = []\n            this.total = 0\n            ElMessage.warning(res.msg || '未找到用户')\n          }\n        }).catch(err => {\n          console.error('Error fetching by phone', err, err?.response)\n          const status = err?.response?.status\n          ElMessage.error(`查询用户失败${status ? '（HTTP ' + status + ')' : ''}`)\n        })\n        return\n      }\n\n      // 默认分页查询 /users\n      request.get(\"/users\",{\n        params:{\n          page: this.currentPage,\n          pageSize: this.pageSize,\n        }\n      }).then(res =>{\n        console.log(res)\n        // 兼容后端 PageBean 命名 rows/total 或 records/total\n        this.tableData = res.data.rows || res.data.records || []\n        this.total = res.data.total || 0\n      }).catch(err => {\n        console.error(err)\n        ElMessage.error('获取用户列表失败')\n      })\n    },\n    clear(){\n      this.search1 = \"\"\n      this.search2 = \"\"\n      this.search3 = \"\"\n      this.load()\n    },\n\n    handleDelete(id){\n      // 真实后端请求\n      request.get(\"/deleteById\", {\n        params: { id: id }\n      }).then(res =>{\n        console.log(res)\n        if(res.code == 1 ){\n          ElMessage.success(\"删除成功\")\n        }\n        else\n          ElMessage.error(res.msg)\n        this.load()\n      })\n    },\n\n\n    add(){\n      this.dialogVisible= true\n      this.form ={\n        userRole: 0,  // 新增用户默认普通用户\n      }\n    },\n    save(){\n      // 本地模拟增删改\n      // if (this.useMock) {\n      //   if (this.form.id) {\n      //     const index = mockUsers.findIndex(u => u.id === this.form.id)\n      //     if (index !== -1) {\n      //       mockUsers.splice(index, 1, { ...mockUsers[index], ...this.form })\n      //       ElMessage.success('更新成功（本地模拟）')\n      //     } else {\n      //       ElMessage.error('未找到该用户（本地模拟）')\n      //     }\n      //   } else {\n      //     const maxId = mockUsers.reduce((max, item) => Math.max(max, item.id), 0)\n      //     const newItem = { ...this.form, id: maxId + 1 }\n      //     mockUsers.push(newItem)\n      //     ElMessage.success('添加成功（本地模拟）')\n      //   }\n      //   this.load()\n      //   this.dialogVisible = false\n      //   return\n      // }\n\n      // 真实后端请求\n      if(this.form.id){\n        // backend has two update handlers; include id and userRole when present\n        const payload = {\n          id: this.form.id,\n          old_username: this.form.old_username || this.form.userName,\n          username: this.form.userName,\n          password: this.form.password || '',\n          checkpassword: this.form.checkpassword || ''\n        }\n        if (this.form.userRole !== undefined) {\n          payload.userRole = this.form.userRole\n        }\n        request.post(\"/updateUser\", payload).then(res =>{\n          console.log(res)\n          if(res.code == 1){\n            ElMessage({\n              message: res.msg || '更新成功',\n              type: 'success',\n            })\n          }\n          else {\n            ElMessage.error(res.msg)\n          }\n\n          this.load()\n          this.dialogVisible = false\n        })\n      }\n      else {\n        // add user via backend /addUser\n        const payload = {\n          username: this.form.userName,\n          password: this.form.password,\n          checkpassword: this.form.checkpassword,\n          phone: this.form.phone,\n          userRole: this.form.userRole\n        }\n        request.post(\"/addUser\", payload).then(res =>{\n          console.log(res)\n          if(res.code == 1){\n            ElMessage.success(res.msg || '添加成功')\n          }\n          else {\n            ElMessage.error(res.msg)\n          }\n          this.load()\n          this.dialogVisible = false\n        })\n      }\n\n    },\n\n\n    handleEdit(row){\n      this.form = JSON.parse(JSON.stringify(row))\n      // preserve old username for backend update\n      this.form.old_username = row.userName || row.username\n      this.dialogVisible = true\n    },\n    handleCurrentChange(pageNum){\n      this.currentPage = pageNum\n      this.load()\n    },\n  },\n  data() {\n    return {\n      form: {},\n      dialogVisible : false,\n      search1:'',\n      search2:'',\n      search3:'',\n      search4:'',\n      total:10,\n      currentPage:1,\n      pageSize: 5,\n      tableData: [\n\n      ],\n      user:{},\n      ids:[],\n      // 当前是否使用本地模拟数据，后端写好后设为 false 即可真实联调\n      useMock: false,\n    }\n  },\n}\n</script>\n","import { render } from \"./UserView.vue?vue&type=template&id=2d1ba941\"\nimport script from \"./UserView.vue?vue&type=script&lang=js\"\nexport * from \"./UserView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_el_form","inline","size","_component_el_form_item","label","_component_el_input","$data","search1","$event","placeholder","clearable","prefix","_withCtx","_component_el_icon","_component_search","search2","search3","_component_el_button","type","onClick","$options","load","_cache","clear","user","userRole","_createBlock","add","_hoisted_3","role","_component_el_popconfirm","title","onConfirm","deleteBatch","reference","_component_el_table","data","tableData","stripe","border","onSelectionChange","handleSelectionChange","_component_el_table_column","width","prop","sortable","scope","row","_component_el_tag","fixed","handleEdit","handleDelete","id","_hoisted_4","_component_el_pagination","currentPage","pageSize","layout","total","onCurrentChange","handleCurrentChange","_component_el_dialog","dialogVisible","footer","_hoisted_5","save","model","form","userName","password","checkpassword","phone","_component_el_radio","number","created","this","userStr","sessionStorage","getItem","JSON","parse","name","methods","val","ids","map","v","length","request","post","then","res","code","ElMessage","success","error","msg","warning","Number","isNaN","urlById","console","log","get","catch","err","response","status","urlByName","params","username","urlByPhone","page","rows","records","payload","old_username","undefined","message","stringify","pageNum","search4","useMock","__exports__","render"],"ignoreList":[],"sourceRoot":""}