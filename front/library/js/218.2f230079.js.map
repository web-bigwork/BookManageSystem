{"version":3,"file":"js/218.2f230079.js","mappings":"qLACOA,MAAM,OAAOC,MAAA,kB,GAEXA,MAAA,mB,GA8CAA,MAAA,mB,aA8BKD,MAAM,iB,qVA9ElBE,EAAAA,EAAAA,IAmFM,MAnFNC,EAmFM,EAjFJC,EAAAA,EAAAA,IAmBM,MAnBNC,EAmBM,EAlBJC,EAAAA,EAAAA,IAiBUC,EAAA,CAjBDC,OAAO,OAAOC,KAAK,S,kBAC1B,IAIgB,EAJhBH,EAAAA,EAAAA,IAIgBI,EAAA,CAJFC,MAAM,QAAM,C,iBACxB,IAEW,EAFXL,EAAAA,EAAAA,IAEWM,EAAA,C,WAFQC,EAAAC,Q,qCAAAD,EAAAC,QAAOC,GAAEC,YAAY,UAAWC,UAAA,I,CACtCC,QAAMC,EAAAA,EAAAA,IAAC,IAAmD,EAAnDb,EAAAA,EAAAA,IAAmDc,EAAA,CAA1CpB,MAAM,kBAAgB,C,iBAAC,IAAS,EAATM,EAAAA,EAAAA,IAASe,K,wCAG/Df,EAAAA,EAAAA,IAIgBI,EAAA,CAJFC,MAAM,OAAK,C,iBACvB,IAEW,EAFXL,EAAAA,EAAAA,IAEWM,EAAA,C,WAFQC,EAAAS,Q,qCAAAT,EAAAS,QAAOP,GAAEC,YAAY,SAAUC,UAAA,I,CACrCC,QAAMC,EAAAA,EAAAA,IAAC,IAAoD,EAApDb,EAAAA,EAAAA,IAAoDc,EAAA,CAA3CpB,MAAM,kBAAgB,C,iBAAC,IAAU,EAAVM,EAAAA,EAAAA,IAAUe,K,wCAGhEf,EAAAA,EAAAA,IAEeI,EAAA,M,iBADb,IAA0F,EAA1FJ,EAAAA,EAAAA,IAA0FiB,EAAA,CAA/EC,KAAK,UAAUvB,MAAA,qBAAyBwB,QAAOC,EAAAC,KAAMlB,KAAK,Q,kBAAO,IAAE,IAAAmB,EAAA,KAAAA,EAAA,K,QAAF,MAAE,O,6BAEhFtB,EAAAA,EAAAA,IAEeI,EAAA,M,iBADb,IAAmE,EAAnEJ,EAAAA,EAAAA,IAAmEiB,EAAA,CAAxDd,KAAK,OAAQe,KAAK,SAAUC,QAAOC,EAAAG,O,kBAAO,IAAE,IAAAD,EAAA,KAAAA,EAAA,K,QAAF,MAAE,O,uCAM7DtB,EAAAA,EAAAA,IAqBWwB,EAAA,CArBAC,KAAMlB,EAAAmB,UAAWC,OAAA,GAAOC,OAAO,Q,kBACxC,IAAuD,EAAvD5B,EAAAA,EAAAA,IAAuD6B,EAAA,CAAtCC,KAAK,SAASzB,MAAM,OAAO0B,SAAA,MAC5C/B,EAAAA,EAAAA,IAA+C6B,EAAA,CAA9BC,KAAK,WAAWzB,MAAM,SACvCL,EAAAA,EAAAA,IAA6C6B,EAAA,CAA5BC,KAAK,QAAQzB,MAAM,UACpCL,EAAAA,EAAAA,IAAoE6B,EAAA,CAAnDC,KAAK,oBAAoBzB,MAAM,SAAS0B,SAAA,MACzD/B,EAAAA,EAAAA,IAAmE6B,EAAA,CAAlDC,KAAK,mBAAmBzB,MAAM,SAAS0B,SAAA,MACxD/B,EAAAA,EAAAA,IAIkB6B,EAAA,CAJDxB,MAAM,MAAI,C,iBAEvB,IAAkC,EAAlCL,EAAAA,EAAAA,IAAkCgC,EAAA,CAA1Bd,KAAK,UAAQ,C,iBAAC,IAAG,IAAAI,EAAA,KAAAA,EAAA,K,QAAH,OAAG,O,eAG7BtB,EAAAA,EAAAA,IASkB6B,EAAA,CATDxB,MAAM,KAAK4B,MAAM,S,kBAEyCC,GADlD,EACrBlC,EAAAA,EAAAA,IAAuEiB,EAAA,CAA5Dd,KAAK,OAAQgB,QAAKV,GAAEW,EAAAe,YAAYD,EAAME,M,kBAAM,IAAI,IAAAd,EAAA,KAAAA,EAAA,K,QAAJ,QAAI,O,qBAC3DtB,EAAAA,EAAAA,IAIgBqC,EAAA,CAJDC,MAAM,WAAYC,UAAO9B,GAAEW,EAAAoB,oBAAoBN,EAAME,M,CACvDK,WAAS5B,EAAAA,EAAAA,IAClB,IAAuD,EAAvDb,EAAAA,EAAAA,IAAuDiB,EAAA,CAA5CC,KAAK,UAAUf,KAAK,Q,kBAAO,IAAK,IAAAmB,EAAA,KAAAA,EAAA,K,QAAL,SAAK,O,0DAQrDxB,EAAAA,EAAAA,IAWM,MAXN4C,EAWM,EAVJ1C,EAAAA,EAAAA,IASgB2C,EAAA,CARJC,YAAarC,EAAAqC,Y,sCAAArC,EAAAqC,YAAWnC,GAC/B,aAAY,CAAC,EAAG,GAAI,IACpB,YAAWF,EAAAsC,SACZC,OAAO,0CACNC,MAAOxC,EAAAwC,MACPC,aAAa5B,EAAA6B,iBACbC,gBAAgB9B,EAAA+B,qB,gFAMvBnD,EAAAA,EAAAA,IAoBYoD,EAAA,C,WApBQ7C,EAAA8C,oB,qCAAA9C,EAAA8C,oBAAmB5C,GAAE6B,MAAM,OAAOL,MAAM,O,CAe/CqB,QAAMzC,EAAAA,EAAAA,IACf,IAEO,EAFPf,EAAAA,EAAAA,IAEO,OAFPyD,EAEO,EADLvD,EAAAA,EAAAA,IAA+DiB,EAAA,CAAnDE,QAAKG,EAAA,KAAAA,EAAA,GAAAb,GAAEF,EAAA8C,qBAAsB,I,kBAAO,IAAG,IAAA/B,EAAA,MAAAA,EAAA,M,QAAH,OAAG,O,2BAhBvD,IAaM,CAbKf,EAAAiD,e,WAAX5D,EAAAA,EAAAA,IAaM,MAAA6D,EAAA,EAZJ3D,EAAAA,EAAAA,IAAsD,U,eAAnDA,EAAAA,EAAAA,IAAsB,cAAd,SAAK,K,iBAAYS,EAAAiD,aAAaE,QAAM,MAC/C5D,EAAAA,EAAAA,IAAuD,U,eAApDA,EAAAA,EAAAA,IAAqB,cAAb,QAAI,K,iBAAYS,EAAAiD,aAAaG,UAAQ,MAChD7D,EAAAA,EAAAA,IAAqD,U,eAAlDA,EAAAA,EAAAA,IAAsB,cAAd,SAAK,K,iBAAYS,EAAAiD,aAAaI,OAAK,MAC9C9D,EAAAA,EAAAA,IAAmE,U,eAAhEA,EAAAA,EAAAA,IAAwB,cAAhB,WAAO,K,iBAAYS,EAAAiD,aAAaK,mBAAiB,MAC5D/D,EAAAA,EAAAA,IAAkE,U,eAA/DA,EAAAA,EAAAA,IAAwB,cAAhB,WAAO,K,iBAAYS,EAAAiD,aAAaM,kBAAgB,K,eAC3DhE,EAAAA,EAAAA,IAA+B,WAA5BA,EAAAA,EAAAA,IAAwB,cAAhB,a,KACXE,EAAAA,EAAAA,IAKWwB,EAAA,CALAC,KAAMlB,EAAAiD,aAAaO,eAAgB5D,KAAK,QAAQR,MAAA,uB,kBACzD,IAAgD,EAAhDK,EAAAA,EAAAA,IAAgD6B,EAAA,CAA/BC,KAAK,WAAWzB,MAAM,UACvCL,EAAAA,EAAAA,IAAgD6B,EAAA,CAA/BC,KAAK,WAAWzB,MAAM,UACvCL,EAAAA,EAAAA,IAA+C6B,EAAA,CAA9BC,KAAK,UAAUzB,MAAM,UACtCL,EAAAA,EAAAA,IAAmD6B,EAAA,CAAlCC,KAAK,cAAczB,MAAM,W,uFAgBpD,GACE2D,KAAM,gBACNC,OAAAA,GACEC,KAAK7C,MACP,EACA8C,QAAS,CACP9C,IAAAA,GACE+C,EAAAA,EAAQC,IAAI,mBAAoB,CAC9BC,OAAQ,CACNC,KAAML,KAAKtB,YACXC,SAAUqB,KAAKrB,SACfa,OAAQQ,KAAK1D,cAAWgE,EACxBb,SAAUO,KAAKlD,cAAWwD,KAE3BC,KAAKC,IAEN,GADAC,QAAQC,IAAI,SAAUF,GACL,IAAbA,EAAIG,KAAY,CAClB,MAAMpD,EAAOiD,EAAIjD,MAAQ,CAAC,EAC1ByC,KAAKxC,UAAYD,EAAKqD,MAAQrD,EAAKsD,SAAW,GAC9Cb,KAAKnB,MAAQtB,EAAKsB,OAASmB,KAAKxC,UAAUsD,MAC5C,MACEC,EAAAA,GAAUC,MAAMR,EAAIS,KAAO,WAC3BjB,KAAKxC,UAAY,GACjBwC,KAAKnB,MAAQ,IAEdqC,MAAMC,IACPV,QAAQO,MAAM,WAAYG,GAC1BJ,EAAAA,GAAUC,MAAM,iBAChBhB,KAAKxC,UAAY,GACjBwC,KAAKnB,MAAQ,GAEjB,EACAxB,KAAAA,GACE2C,KAAK1D,QAAU,GACf0D,KAAKlD,QAAU,GACfkD,KAAK7C,MACP,EACAc,WAAAA,CAAYC,GACVgC,EAAAA,EAAQC,IAAI,mBAAmBjC,EAAIsB,kBAAkBe,KAAKC,IACxDC,QAAQC,IAAI,UAAWF,GACN,IAAbA,EAAIG,MACNX,KAAKV,aAAe,IACfpB,EACH2B,eAAgBW,EAAIjD,MAAQ,IAE9ByC,KAAKb,qBAAsB,GAE3B4B,EAAAA,GAAUC,MAAMR,EAAIS,KAAO,YAE5BC,MAAMC,IACPV,QAAQO,MAAM,UAAWG,GACzBJ,EAAAA,GAAUC,MAAM,iBAEpB,EACA1C,mBAAAA,CAAoBJ,GAClBgC,EAAAA,EAAQkB,KAAK,oBAAqB,CAAE5B,OAAQtB,EAAIsB,SAAUe,KAAKC,IAC7DC,QAAQC,IAAI,WAAYF,GACP,IAAbA,EAAIG,MACNI,EAAAA,GAAUM,QAAQb,EAAIS,KAAO,QAAQ/C,EAAIuB,kBACzCO,KAAK7C,QAEL4D,EAAAA,GAAUC,MAAMR,EAAIS,KAAO,aAE5BC,MAAMC,IACPV,QAAQO,MAAM,WAAYG,GAC1BJ,EAAAA,GAAUC,MAAM,kBAEpB,EACAjC,gBAAAA,CAAiBJ,GACfqB,KAAKrB,SAAWA,EAChBqB,KAAK7C,MACP,EACA8B,mBAAAA,CAAoBqC,GAClBtB,KAAKtB,YAAc4C,EACnBtB,KAAK7C,MACP,GAEFI,IAAAA,GACE,MAAO,CACLjB,QAAS,GACTQ,QAAS,GACTU,UAAW,GACX2B,qBAAqB,EACrBG,aAAc,KACdZ,YAAa,EACbC,SAAU,GACVE,MAAO,EAEX,G,UC9KF,MAAM0C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://book/./src/views/BlacklistView.vue","webpack://book/./src/views/BlacklistView.vue?f825"],"sourcesContent":["<template>\n  <div class=\"home\" style=\"padding: 10px\">\n    <!-- 搜索-->\n    <div style=\"margin: 10px 0;\">\n      <el-form inline=\"true\" size=\"small\">\n        <el-form-item label=\"用户编号\" >\n          <el-input v-model=\"search1\" placeholder=\"请输入用户编号\"  clearable>\n            <template #prefix><el-icon class=\"el-input__icon\"><search/></el-icon></template>\n          </el-input>\n        </el-form-item >\n        <el-form-item label=\"用户名\" >\n          <el-input v-model=\"search2\" placeholder=\"请输入用户名\"  clearable>\n            <template #prefix><el-icon class=\"el-input__icon\"><search /></el-icon></template>\n          </el-input>\n        </el-form-item >\n        <el-form-item>\n          <el-button type=\"primary\" style=\"margin-left: 1%\" @click=\"load\" size=\"mini\">查询</el-button>\n        </el-form-item>\n        <el-form-item>\n          <el-button size=\"mini\"  type=\"danger\" @click=\"clear\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n\n    <!-- 数据字段-->\n    <el-table :data=\"tableData\" stripe border=\"true\">\n      <el-table-column prop=\"userId\" label=\"用户编号\" sortable />\n      <el-table-column prop=\"username\" label=\"用户名\" />\n      <el-table-column prop=\"phone\" label=\"联系电话\" />\n      <el-table-column prop=\"overdueBooksCount\" label=\"逾期书籍数量\" sortable />\n      <el-table-column prop=\"totalOverdueDays\" label=\"累计逾期天数\" sortable />\n      <el-table-column label=\"状态\">\n        <template v-slot>\n          <el-tag type=\"danger\">黑名单</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"200px\">\n        <template v-slot=\"scope\">\n          <el-button size=\"mini\" @click=\"viewDetails(scope.row)\">查看详情</el-button>\n          <el-popconfirm title=\"确认移出黑名单?\" @confirm=\"removeFromBlacklist(scope.row)\">\n            <template #reference>\n              <el-button type=\"warning\" size=\"mini\">移出黑名单</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!--    分页-->\n    <div style=\"margin: 10px 0\">\n      <el-pagination\n          v-model:currentPage=\"currentPage\"\n          :page-sizes=\"[5, 10, 20]\"\n          :page-size=\"pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n      >\n      </el-pagination>\n    </div>\n\n    <!-- 详情对话框-->\n    <el-dialog v-model=\"detailDialogVisible\" title=\"逾期详情\" width=\"50%\">\n      <div v-if=\"selectedUser\">\n        <p><strong>用户编号：</strong>{{ selectedUser.userId }}</p>\n        <p><strong>用户名：</strong>{{ selectedUser.username }}</p>\n        <p><strong>联系电话：</strong>{{ selectedUser.phone }}</p>\n        <p><strong>逾期书籍数量：</strong>{{ selectedUser.overdueBooksCount }}</p>\n        <p><strong>累计逾期天数：</strong>{{ selectedUser.totalOverdueDays }}</p>\n        <p><strong>逾期书籍详情：</strong></p>\n        <el-table :data=\"selectedUser.overdueDetails\" size=\"small\" style=\"margin-top: 10px\">\n          <el-table-column prop=\"bookName\" label=\"书籍名称\" />\n          <el-table-column prop=\"lendTime\" label=\"借出时间\" />\n          <el-table-column prop=\"dueTime\" label=\"应还时间\" />\n          <el-table-column prop=\"overdueDays\" label=\"逾期天数\" />\n        </el-table>\n      </div>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"detailDialogVisible = false\">关 闭</el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport request from \"../utils/request\";\nimport {ElMessage} from \"element-plus\";\n\nexport default {\n  name: 'BlacklistView',\n  created(){\n    this.load()\n  },\n  methods: {\n    load(){\n      request.get(\"/blacklist/users\", {\n        params: {\n          page: this.currentPage,\n          pageSize: this.pageSize,\n          userId: this.search1 || undefined,\n          username: this.search2 || undefined\n        }\n      }).then(res => {\n        console.log('黑名单数据:', res)\n        if (res.code === 1) {\n          const data = res.data || {}\n          this.tableData = data.rows || data.records || []\n          this.total = data.total || this.tableData.length\n        } else {\n          ElMessage.error(res.msg || '加载黑名单失败')\n          this.tableData = []\n          this.total = 0\n        }\n      }).catch(err => {\n        console.error(\"加载黑名单失败:\", err)\n        ElMessage.error(\"加载黑名单失败，请稍后重试\")\n        this.tableData = []\n        this.total = 0\n      })\n    },\n    clear(){\n      this.search1 = \"\"\n      this.search2 = \"\"\n      this.load()\n    },\n    viewDetails(row){\n      request.get(`/blacklist/user/${row.userId}/details`).then(res => {\n        console.log('用户逾期详情:', res)\n        if (res.code === 1) {\n          this.selectedUser = {\n            ...row,\n            overdueDetails: res.data || []\n          }\n          this.detailDialogVisible = true\n        } else {\n          ElMessage.error(res.msg || '获取详情失败')\n        }\n      }).catch(err => {\n        console.error(\"获取详情失败:\", err)\n        ElMessage.error(\"获取详情失败，请稍后重试\")\n      })\n    },\n    removeFromBlacklist(row){\n      request.post(\"/blacklist/remove\", { userId: row.userId }).then(res => {\n        console.log('移出黑名单结果:', res)\n        if (res.code === 1) {\n          ElMessage.success(res.msg || `已将用户 ${row.username} 移出黑名单`)\n          this.load()\n        } else {\n          ElMessage.error(res.msg || '移出黑名单失败')\n        }\n      }).catch(err => {\n        console.error(\"移出黑名单失败:\", err)\n        ElMessage.error(\"移出黑名单失败，请稍后重试\")\n      })\n    },\n    handleSizeChange(pageSize){\n      this.pageSize = pageSize\n      this.load()\n    },\n    handleCurrentChange(pageNum){\n      this.currentPage = pageNum\n      this.load()\n    }\n  },\n  data() {\n    return {\n      search1: '',\n      search2: '',\n      tableData: [],\n      detailDialogVisible: false,\n      selectedUser: null,\n      currentPage: 1,\n      pageSize: 10,\n      total: 0\n    }\n  },\n}\n</script>\n","import { render } from \"./BlacklistView.vue?vue&type=template&id=5aa4d03f\"\nimport script from \"./BlacklistView.vue?vue&type=script&lang=js\"\nexport * from \"./BlacklistView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_el_form","inline","size","_component_el_form_item","label","_component_el_input","$data","search1","$event","placeholder","clearable","prefix","_withCtx","_component_el_icon","_component_search","search2","_component_el_button","type","onClick","$options","load","_cache","clear","_component_el_table","data","tableData","stripe","border","_component_el_table_column","prop","sortable","_component_el_tag","width","scope","viewDetails","row","_component_el_popconfirm","title","onConfirm","removeFromBlacklist","reference","_hoisted_3","_component_el_pagination","currentPage","pageSize","layout","total","onSizeChange","handleSizeChange","onCurrentChange","handleCurrentChange","_component_el_dialog","detailDialogVisible","footer","_hoisted_5","selectedUser","_hoisted_4","userId","username","phone","overdueBooksCount","totalOverdueDays","overdueDetails","name","created","this","methods","request","get","params","page","undefined","then","res","console","log","code","rows","records","length","ElMessage","error","msg","catch","err","post","success","pageNum","__exports__","render"],"ignoreList":[],"sourceRoot":""}